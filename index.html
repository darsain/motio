<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<title>Motio - jQuery plugin</title>
	<meta name="description" content="Simple sprite based animations with jQuery.">
	<meta name="viewport" content="width=device-width">
	<link href='http://fonts.googleapis.com/css?family=Exo:700' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" href="css/style.css">
</head>
<body id="top">

	<div id="header">
		<div class="container">

			<h1>Motio</h1>
			<p>jQuery plugin for simple but powerful sprite based animations and panning</p>

			<div class="download">
				<h4>Download latest</h4>
				<a href="//github.com/Darsain/motio/raw/master/jquery.motio.js" class="left"><span>Development</span></a>
				<a href="//github.com/Darsain/motio/raw/master/jquery.motio.min.js" class="right"><span>Production</span></a>
			</div>

			<a href="//github.com/Darsain/motio" class="repo ir">Repository &amp; Documentation on Github</a>

			<ul id="nav" class="clearfix">
				<li><a href="#examples">Examples</a></li>
				<li><a href="#minigame">Minigame</a></li>
			</ul>

		</div>
	</div>

	<div id="content">
	<div id="sections" class="container">

		<div id="examples" class="clearfix">

			<div id="pan" class="motiowrap motio clearfix" data-motio='{ "speed": -50, "bgSize": 1024, "paused": 1 }'>

<pre class="prettyprint lang-js">
$('#pan').motio({
	speed: -50,
	bgSize: 1024,
	paused: 1
});
</pre>


				<button class="btn" data-action="play">Play</button>
				<button class="btn" data-action="pause">Pause</button>
				<button class="btn" data-action="toggle">Toggle</button>

				<br>

				<div class="optionblock">
					<span>Speed</span> <span class="divider"></span>
					<input type="text" name="speed" min="-100" max="100" step="1" value="-50" class="range">
					<span class="divider"></span>
				</div>
				<br>
				<div class="optionblock">
					<span>FPS</span> <span class="divider"></span>
					<input type="text" name="fps" min="1" max="60" step="1" value="15" class="range">
					<span class="divider"></span>
				</div>

			</div>

			<div class="motiowrap clearfix">

				<div id="walk" class="motio" data-motio='{ "frames": 12, "fps": 10, "paused": 1 }'></div>

<pre class="prettyprint lang-js">
$('#walk').motio({ frames: 10, fps: 10, paused: 1 });
</pre>

				<div class="nav">
					<button class="btn" data-action="play">Play</button>
					<button class="btn" data-action="pause">Pause</button>
					<button class="btn" data-action="toggle">Toggle</button>
				</div>

				<div class="optionblock">
					<span>FPS</span> <span class="divider"></span>
					<input type="text" name="fps" min="1" max="60" step="1" value="10" class="range">
					<span class="divider"></span>
				</div>
			</div>

			<div class="motiowrap clearfix">

				<div id="kick" class="motio" data-motio='{ "frames": 10, "fps": 10, "paused": 1 }'></div>

<pre class="prettyprint lang-js">
$('#kick').motio({ frames: 10, fps: 10, paused: 1 });
</pre>

				<div class="nav">
					<button class="btn" data-action="play">Play</button>
					<button class="btn" data-action="pause">Pause</button>
					<button class="btn" data-action="toggle">Toggle</button>
					<button class="btn" data-action="toStart">ToStart</button>
					<button class="btn" data-action="toEnd">ToEnd</button>
				</div>

				<div class="optionblock">
					<span>FPS</span> <span class="divider"></span>
					<input type="text" name="fps" min="1" max="60" step="1" value="10" class="range">
					<span class="divider"></span>
				</div>

			</div>

			<div class="motiowrap clearfix">

				<div id="fire" class="motio" data-motio='{ "frames": 25, "fps": 15, "paused": 1 }'></div>

<pre class="prettyprint lang-js">
$('#fire').motio({ frames: 25, fps: 15, paused: 1 });
</pre>

				<div class="nav">
					<button class="btn" data-action="toStart">ToStart</button>
					<button class="btn" data-action="toEnd">ToEnd</button>
				</div>

				<div class="optionblock">
					<span>FPS</span> <span class="divider"></span>
					<input type="text" name="fps" min="1" max="60" step="1" value="15" class="range">
					<span class="divider"></span>
				</div>
			</div>

			<div class="motiowrap clearfix">

				<div id="fire2" class="motio" data-motio='{ "frames": 20, "fps": 15, "paused": 1 }'></div>

<pre class="prettyprint lang-js">
$('#fire2').motio({ frames: 20, fps: 15, paused: 1 });
</pre>

				<div class="nav">
					<button class="btn" data-action="toStart">ToStart</button>
					<button class="btn" data-action="toEnd">ToEnd</button>
				</div>

				<div class="optionblock">
					<span>FPS</span> <span class="divider"></span>
					<input type="text" name="fps" min="1" max="60" step="1" value="15" class="range">
					<span class="divider"></span>
				</div>
			</div>

		</div><!--end:#examples-->

		<div id="minigame">

			<div class="keys">

				<div class="fright">
					Available keys:
					<span class="key">&larr;</span>
					<span class="key">&rarr;</span>
					<span class="key">Space</span>
					<span class="key">B</span>
				</div>

				<span>Motio is not really intended for games, but I just wanted to try :)</span>

			</div>

			<div id="game">

				<div class="char">

					<div class="stand"></div>
					<div class="stand_left"></div>
					<div class="run"></div>
					<div class="run_left"></div>
					<div class="jump"></div>
					<div class="jump_left"></div>
					<div class="kick"></div>
					<div class="kick_left"></div>

				</div>

				<div class="overlay"></div>
			</div>

			<small class="fright">Graphics are from <a href="http://spriters-resource.com/arcade/prettysoldiersailormoon/">here</a>. Please don't sue me, anyone :)</small>

			<small>I've spent one whole day on this! O_o</small>

<h4>HTML</h4>
<pre class="prettyprint lang-html">
&lt;div id=&quot;game&quot;&gt;

	&lt;div class=&quot;char&quot;&gt;

		&lt;div class=&quot;stand&quot;&gt;&lt;/div&gt;
		&lt;div class=&quot;stand_left&quot;&gt;&lt;/div&gt;
		&lt;div class=&quot;run&quot;&gt;&lt;/div&gt;
		&lt;div class=&quot;run_left&quot;&gt;&lt;/div&gt;
		&lt;div class=&quot;jump&quot;&gt;&lt;/div&gt;
		&lt;div class=&quot;jump_left&quot;&gt;&lt;/div&gt;
		&lt;div class=&quot;kick&quot;&gt;&lt;/div&gt;
		&lt;div class=&quot;kick_left&quot;&gt;&lt;/div&gt;

	&lt;/div&gt;

	&lt;div class=&quot;overlay&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
</pre>

<h4>CSS</h4>
<pre class="prettyprint lang-css">
#game {
	position: relative;
	clear: both;
	margin: 10px 0;
	width: 100%;
	height: 240px;
	background: url('../img/minigame_bg.png') no-repeat center 0;
}
#game div {
	position: absolute;
}

#game .char {
	width: 120px;
	height: 150px;
	left: 410px;
	bottom: 0;
}
#game .char div {
	width: 100%;
	height: 100%;
	background: url('../img/sailormars.gif') no-repeat left top;
}
#game .char .stand {
	background-position: 0 0;
}
#game .char .stand_left {
	background-position: 0 -150px;
}
#game .char .run {
	background-position: 0 -300px;
}
#game .char .run_left {
	background-position: 0 -450px;
}
#game .char .jump {
	background-position: 0 -600px;
}
#game .char .jump_left {
	background-position: 0 -750px;
}
#game .char .kick {
	background-position: 0 -900px;
}
#game .char .kick_left {
	background-position: 0 -1050px;
}

#game .overlay {
	width: 100%;
	height: 100%;
	left: 0;
	top: 0;
	z-index: 2;
	background: url('../img/minigame_bg.png') no-repeat center -240px;
}
</pre>

<h4>Javascript <small>- this is REALLY dirty and could be written a LOT smarter, buttfuckit...</small></h4>
<pre class="prettyprint lang-js">
var $game = $(&#039;#game&#039;),
	pos = 400,
	$char = $game.find(&#039;.char&#039;).css({ left: pos + &#039;px&#039; }),
	posMax = $game.innerWidth() - $char.innerWidth(),
	facing = &#039;right&#039;,
	moveSpeed = 300,
	moveFps = 30,
	pressed = [],
	inAction = 0,
	inRunning = 0,
	mIndex,
	listenOn = [37,39,32,66],
	$mations = $char.children().hide(),
	mations = {
		right: {
			stand: $mations.filter(&#039;.stand&#039;).motio({ frames: 8, paused: 1, fps: 10 }),
			run:   $mations.filter(&#039;.run&#039;  ).motio({ frames: 6, paused: 1, fps: 10 }),
			jump:  $mations.filter(&#039;.jump&#039; ).motio({ frames: 10, paused: 1, fps: 15 }),
			kick:  $mations.filter(&#039;.kick&#039; ).motio({ frames: 9, paused: 1, fps: 15 })
		},
		left: {
			stand: $mations.filter(&#039;.stand_left&#039;).motio({ frames: 8, paused: 1, fps: 10 }),
			run:   $mations.filter(&#039;.run_left&#039;  ).motio({ frames: 6, paused: 1, fps: 10 }),
			jump:  $mations.filter(&#039;.jump_left&#039; ).motio({ frames: 10, paused: 1, fps: 15 }),
			kick:  $mations.filter(&#039;.kick_left&#039; ).motio({ frames: 9, paused: 1, fps: 15 })
		}
	};

// Start with standing animation
mations[facing].stand.show().motio(&#039;play&#039;);

// On actions end
$mations.not(&#039;.stand,.stand_left,.run,.run_left&#039;).motio(&#039;on&#039;, &#039;end&#039;, function(){

	inAction = 0;
	$(this).hide();
	mations[facing][ inRunning ? &#039;run&#039; : &#039;stand&#039; ].show().motio(&#039;play&#039;);

});

// Keydown handlers
$(document).on(&#039;keydown&#039;, function(event){

	if( $.inArray( event.which, listenOn ) === -1 || pressed[event.which]  ){

		return;

	}

	pressed[event.which] = true;

	var request;

	switch( event.which ){

		// Left arrow
		case 37:
			request = &#039;run&#039;;
			facing = &#039;left&#039;;
		break;

		// Right arrow
		case 39:
			request = &#039;run&#039;;
			facing = &#039;right&#039;;
		break;

		// Spacebar
		case 32:
			request = &#039;jump&#039;;
		break;

		// B
		case 66:
			request = &#039;kick&#039;;
		break;

	}

	if( request === &#039;run&#039; ){

		inAction = 0;
		mIndex = clearTimeout( mIndex );
		inRunning = 1;
		move();

	} else {

		inAction = 1;

	}

	$mations.hide().motio(&#039;toStart&#039;, true);
	mations[facing][request].show().motio( request === &#039;run&#039; ? &#039;play&#039; : &#039;toEnd&#039; );

	return false;

});

// Keyup handlers
$(document).on(&#039;keyup&#039;, function(event){

	if( $.inArray( event.which, listenOn ) === -1 ){

		return;

	}

	pressed[event.which] = false;

	var released;

	switch(event.which){

		// Left &amp; arrow
		case 37:
			released = &#039;left&#039;;
		break;

		// Right arrow
		case 39:
			released = &#039;right&#039;;
		break;

	}

	if( inRunning &amp;&amp; facing === released ){

		mations[released].run.hide().motio(&#039;toStart&#039;, true);

		inRunning = 0;
		mIndex = clearTimeout( mIndex );

		if( !inAction ){

			mations[&#039;left&#039;].stand.add(mations[&#039;right&#039;].stand).motio(&#039;toStart&#039;, true);
			mations[facing].stand.show().motio(&#039;play&#039;);

		}

	}

	return false;

});

// Move function
function move(){

	if( pos === 0 &amp;&amp; facing === &#039;left&#039; || pos === posMax &amp;&amp; facing === &#039;right&#039; ){
		return;
	}

	pos += ( facing === &#039;right&#039; ? moveSpeed : -moveSpeed ) / moveFps;

	if( pos &lt; 0 ){
		pos = 0;
	}
	if( pos &gt; posMax ){
		pos = posMax;
	}

	$char[0].style.left = pos + &#039;px &#039;;

	mIndex = setTimeout( move, 1000 / moveFps );

}
</pre>

		</div><!--end:#minigame-->

	</div><!--end:#sections-->
	</div><!--end:#content-->

	<div id="footer">
		<div class="container">
			<span class="fright"><a href="#top">Back to top &uarr;</a></span>
			<p>Licensed under the <a href="http://www.opensource.org/licenses/MIT">MIT license</a>.</p>
		</div>
	</div>

	<!-- Grab Google CDN's jQuery, with a protocol relative URL; fall back to local if offline -->
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	<script>window.jQuery || document.write('<script src="js/vendor/jquery-1.7.2.min.js"><\/script>')</script>

	<!-- scripts -->
	<script src="jquery.motio.js"></script>
	<script src="js/vendor/plugins.js"></script>
	<script src="js/main.js"></script>
	<!-- end scripts -->
</body>
</html>
